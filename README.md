# Wallet Service

Сервис кошелька, реализованный на FastAPI с использованием PostgreSQL в качестве базы данных. Проект полностью готов к запуску через Docker.

## Описание

Этот сервис предоставляет API для управления кошельками пользователей с возможностью пополнения баланса и снятия средств.

## Функциональность

- Создание кошельков (автоматически при первой операции)
- Пополнение баланса кошелька
- Снятие средств с кошелька
- Получение текущего баланса кошелька

## Технологии

- Python 3.13
- FastAPI
- PostgreSQL
- SQLAlchemy
- Alembic для миграций
- Docker и Docker Compose

## Запуск через Docker

Для запуска проекта достаточно выполнить одну команду:

```bash
docker-compose up --build
```

Эта команда:
1. Запустит контейнер с PostgreSQL
2. Выполнит миграции базы данных
3. Запустит приложение FastAPI на порту 8000

После запуска API будет доступен по адресу: http://localhost:8000

## API эндпоинты

### Пополнение/снятие средств
```
POST /api/v1/wallets/{WALLET_UUID}/operation
```

Тело запроса:
```json
{
  "operation_type": "DEPOSIT", // или "WITHDRAW"
  "amount": 100.00
}
```

### Получение баланса
```
GET /api/v1/wallets/{WALLET_UUID}
```

## Переменные окружения

Все переменные окружения уже настроены в docker-compose.yml файле:
- `DATABASE_URL` - URL для подключения к PostgreSQL

## Миграции

Миграции выполняются автоматически при запуске контейнера с приложением благодаря команде:
```
alembic upgrade head
```

## Остановка сервиса

Для остановки сервиса используйте:
```bash
docker-compose down
```

Для остановки с удалением данных из базы:
```bash
docker-compose down -v
```